# æ¨¡å‹åˆ—è¡¨æ™ºèƒ½è¿‡æ»¤

## ğŸ“‹ é—®é¢˜æè¿°

ä»èšåˆå¹³å°ï¼ˆå¦‚ OpenRouterï¼‰è·å–æ¨¡å‹åˆ—è¡¨æ—¶ï¼Œä¼šè¿”å›å¤§é‡çš„æ¨¡å‹ï¼ˆå¯èƒ½æœ‰å‡ ç™¾ä¸ªï¼‰ï¼ŒåŒ…æ‹¬ï¼š
- å„ç§å°å‚å•†çš„æ¨¡å‹
- å®éªŒæ€§æ¨¡å‹ï¼ˆpreviewã€alphaã€betaï¼‰
- å…è´¹ç‰ˆæœ¬ï¼ˆfreeï¼‰
- ç‰¹æ®Šç‰ˆæœ¬ï¼ˆextendedã€nitroã€onlineï¼‰
- Fine-tuned æ¨¡å‹

è¿™äº›æ¨¡å‹å¤§å¤šæ•°ç”¨æˆ·ä¸éœ€è¦ï¼Œå¯¼è‡´ï¼š
1. âŒ åˆ—è¡¨è¿‡é•¿ï¼Œéš¾ä»¥ç®¡ç†
2. âŒ åŒ…å«å¾ˆå¤šä¸å¸¸ç”¨çš„æ¨¡å‹
3. âŒ å½±å“ç”¨æˆ·ä½“éªŒ

## âœ… è§£å†³æ–¹æ¡ˆ

å®ç°**æ™ºèƒ½è¿‡æ»¤**åŠŸèƒ½ï¼Œåªä¿ç•™ä¸»æµå¤§å‚çš„å¸¸ç”¨æ¨¡å‹ã€‚

### è¿‡æ»¤è§„åˆ™

#### 1. ä¸»æµå¤§å‚ç™½åå•

åªä¿ç•™ä»¥ä¸‹ä¸‰å¤§å‚çš„æ¨¡å‹ï¼š
- **OpenAI** (`openai`)
- **Anthropic** (`anthropic`)
- **Google** (`google`)

å…¶ä»–å‚å•†çš„æ¨¡å‹ï¼ˆMetaã€Mistral AIã€DeepSeek ç­‰ï¼‰éœ€è¦æ‰‹åŠ¨æ·»åŠ ã€‚

#### 2. æ’é™¤å¸¦æ—¥æœŸçš„æ—§ç‰ˆæœ¬

æ’é™¤æ¨¡å‹ ID ä¸­åŒ…å«æ—¥æœŸçš„æ—§ç‰ˆæœ¬ï¼ˆå¦‚ `2024-05-13`ï¼‰ï¼Œåªä¿ç•™æœ€æ–°ç‰ˆæœ¬ã€‚

**ç¤ºä¾‹**ï¼š
- âŒ `openai/gpt-4o-2024-05-13` - å¸¦æ—¥æœŸï¼Œæ’é™¤
- âœ… `openai/gpt-4o` - æœ€æ–°ç‰ˆï¼Œä¿ç•™
- âŒ `anthropic/claude-3-5-sonnet-20241022` - å¸¦æ—¥æœŸï¼Œæ’é™¤
- âœ… `anthropic/claude-3.5-sonnet` - æœ€æ–°ç‰ˆï¼Œä¿ç•™

#### 3. æ’é™¤å…³é”®è¯

æ’é™¤åŒ…å«ä»¥ä¸‹å…³é”®è¯çš„æ¨¡å‹ï¼š
- `preview` - é¢„è§ˆç‰ˆ
- `experimental` - å®éªŒç‰ˆ
- `alpha` - Alpha ç‰ˆ
- `beta` - Beta ç‰ˆ
- `free` - å…è´¹ç‰ˆ
- `extended` - æ‰©å±•ç‰ˆ
- `nitro` - Nitro ç‰ˆ
- `:free` - å…è´¹æ ‡è®°
- `:extended` - æ‰©å±•æ ‡è®°
- `online` - åœ¨çº¿æœç´¢ç‰ˆ
- `instruct` - Instruct ç‰ˆæœ¬

### è¿‡æ»¤é€»è¾‘

```python
def _filter_popular_models(self, models: list) -> list:
    """è¿‡æ»¤æ¨¡å‹åˆ—è¡¨ï¼Œåªä¿ç•™ä¸»æµå¤§å‚çš„å¸¸ç”¨æ¨¡å‹"""
    import re

    # åªä¿ç•™ä¸‰å¤§å‚
    popular_providers = ["openai", "anthropic", "google"]

    # æ—¥æœŸæ ¼å¼æ­£åˆ™è¡¨è¾¾å¼
    date_pattern = re.compile(r'\d{4}-\d{2}-\d{2}')

    filtered = []
    for model in models:
        model_id = model.get("id", "").lower()

        # 1. æ£€æŸ¥æ˜¯å¦å±äºä¸‰å¤§å‚
        is_popular_provider = any(provider in model_id for provider in popular_providers)
        if not is_popular_provider:
            continue

        # 2. æ£€æŸ¥æ˜¯å¦åŒ…å«æ—¥æœŸï¼ˆæ’é™¤å¸¦æ—¥æœŸçš„æ—§ç‰ˆæœ¬ï¼‰
        if date_pattern.search(model_id):
            continue

        # 3. æ£€æŸ¥æ˜¯å¦åŒ…å«æ’é™¤å…³é”®è¯
        has_exclude_keyword = any(keyword in model_id for keyword in exclude_keywords)
        if has_exclude_keyword:
            continue

        # ä¿ç•™è¯¥æ¨¡å‹
        filtered.append(model)

    return filtered
```

## ğŸ“Š è¿‡æ»¤æ•ˆæœ

### OpenRouter ç¤ºä¾‹

**è¿‡æ»¤å‰**ï¼š
- æ€»æ¨¡å‹æ•°ï¼š~300+ ä¸ª
- åŒ…å«å„ç§å°å‚å•†ã€å®éªŒç‰ˆæœ¬ã€å…è´¹ç‰ˆæœ¬ã€å¸¦æ—¥æœŸçš„æ—§ç‰ˆæœ¬ç­‰

**è¿‡æ»¤å**ï¼š
- ä¿ç•™æ¨¡å‹æ•°ï¼š~15-25 ä¸ª
- åªåŒ…å« OpenAIã€Anthropicã€Google ä¸‰å¤§å‚çš„æœ€æ–°ç‰ˆæœ¬

### ä¿ç•™çš„æ¨¡å‹ç¤ºä¾‹

```
âœ… openai/gpt-4o
âœ… openai/gpt-4o-mini
âœ… openai/gpt-4-turbo
âœ… openai/gpt-3.5-turbo
âœ… anthropic/claude-3.5-sonnet
âœ… anthropic/claude-4.5-sonnet (å¦‚æœæœ‰)
âœ… anthropic/claude-3-opus
âœ… anthropic/claude-3-haiku
âœ… google/gemini-2.0-flash
âœ… google/gemini-1.5-pro
âœ… google/gemini-1.5-flash
```

### æ’é™¤çš„æ¨¡å‹ç¤ºä¾‹

```
âŒ openai/gpt-4o-2024-05-13 (å¸¦æ—¥æœŸ)
âŒ openai/gpt-4o-2024-05-13:free (å¸¦æ—¥æœŸ + å…è´¹ç‰ˆ)
âŒ openai/gpt-4-turbo-preview (é¢„è§ˆç‰ˆ)
âŒ anthropic/claude-3-5-sonnet-20241022 (å¸¦æ—¥æœŸ)
âŒ anthropic/claude-3-opus:beta (Beta ç‰ˆ)
âŒ google/gemini-pro-experimental (å®éªŒç‰ˆ)
âŒ meta-llama/llama-3.1-405b-instruct (å…¶ä»–å‚å•†)
âŒ mistralai/mistral-large (å…¶ä»–å‚å•†)
âŒ deepseek/deepseek-chat (å…¶ä»–å‚å•†)
âŒ openai/gpt-4o-mini-online (åœ¨çº¿æœç´¢ç‰ˆ)
```

## ğŸ”§ å®ç°ç»†èŠ‚

### åç«¯å®ç°

**æ–‡ä»¶**ï¼š`app/services/config_service.py`

#### 1. åœ¨ `_fetch_models_from_api` ä¸­è°ƒç”¨è¿‡æ»¤

```python
if "data" in result and isinstance(result["data"], list):
    all_models = result["data"]
    print(f"ğŸ“Š API è¿”å› {len(all_models)} ä¸ªæ¨¡å‹")
    
    # è¿‡æ»¤ï¼šåªä¿ç•™ä¸»æµå¤§å‚çš„å¸¸ç”¨æ¨¡å‹
    filtered_models = self._filter_popular_models(all_models)
    print(f"âœ… è¿‡æ»¤åä¿ç•™ {len(filtered_models)} ä¸ªå¸¸ç”¨æ¨¡å‹")
    
    return {
        "success": True,
        "models": filtered_models,
        "message": f"æˆåŠŸè·å– {len(filtered_models)} ä¸ªå¸¸ç”¨æ¨¡å‹ï¼ˆå·²è¿‡æ»¤ï¼‰"
    }
```

#### 2. å®ç° `_filter_popular_models` æ–¹æ³•

å®šä¹‰ä¸»æµå¤§å‚ã€å¸¸ç”¨æ¨¡å‹å…³é”®è¯ã€æ’é™¤å…³é”®è¯ï¼Œç„¶åè¿›è¡Œä¸‰é‡è¿‡æ»¤ã€‚

## ğŸ¯ ä¼˜åŠ¿

| ç‰¹æ€§ | è¿‡æ»¤å‰ | è¿‡æ»¤å |
|------|--------|--------|
| æ¨¡å‹æ•°é‡ | âŒ 300+ ä¸ª | âœ… 15-25 ä¸ª |
| æ¨¡å‹è´¨é‡ | âš ï¸ å‚å·®ä¸é½ | âœ… ä¸‰å¤§å‚æœ€æ–°ç‰ˆ |
| ç®¡ç†éš¾åº¦ | âŒ éš¾ä»¥ç®¡ç† | âœ… æ˜“äºç®¡ç† |
| ç”¨æˆ·ä½“éªŒ | âŒ é€‰æ‹©å›°éš¾ | âœ… æ¸…æ™°æ˜äº† |
| å®ç”¨æ€§ | âš ï¸ å¾ˆå¤šä¸å¸¸ç”¨ | âœ… éƒ½æ˜¯å¸¸ç”¨ |
| ç‰ˆæœ¬ | âš ï¸ åŒ…å«æ—§ç‰ˆæœ¬ | âœ… åªæœ‰æœ€æ–°ç‰ˆ |

## ğŸ“ ä½¿ç”¨è¯´æ˜

### è‡ªåŠ¨è¿‡æ»¤

ä» API è·å–æ¨¡å‹åˆ—è¡¨æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åº”ç”¨è¿‡æ»¤è§„åˆ™ï¼Œæ— éœ€ç”¨æˆ·å¹²é¢„ã€‚

### æŸ¥çœ‹è¿‡æ»¤ç»“æœ

åç«¯æ—¥å¿—ä¼šæ˜¾ç¤ºè¿‡æ»¤å‰åçš„æ¨¡å‹æ•°é‡ï¼š
```
ğŸ“Š API è¿”å› 312 ä¸ªæ¨¡å‹
âœ… è¿‡æ»¤åä¿ç•™ 42 ä¸ªå¸¸ç”¨æ¨¡å‹
```

å‰ç«¯ä¼šæ˜¾ç¤ºè¿‡æ»¤åçš„æ•°é‡ï¼š
```
æˆåŠŸè·å– 42 ä¸ªå¸¸ç”¨æ¨¡å‹ï¼ˆå·²è¿‡æ»¤ï¼‰
```

### è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™

å¦‚æœéœ€è¦è°ƒæ•´è¿‡æ»¤è§„åˆ™ï¼Œå¯ä»¥ä¿®æ”¹ `_filter_popular_models` æ–¹æ³•ä¸­çš„ï¼š
- `popular_providers` - ä¸»æµå¤§å‚åˆ—è¡¨
- `common_keywords` - å¸¸ç”¨æ¨¡å‹å…³é”®è¯
- `exclude_keywords` - æ’é™¤å…³é”®è¯

## ğŸ”„ æœªæ¥ä¼˜åŒ–

### 1. å¯é…ç½®çš„è¿‡æ»¤è§„åˆ™

å…è®¸ç”¨æˆ·åœ¨å‰ç«¯é…ç½®è¿‡æ»¤è§„åˆ™ï¼š
- é€‰æ‹©è¦åŒ…å«çš„å¤§å‚
- é€‰æ‹©è¦åŒ…å«çš„æ¨¡å‹ç³»åˆ—
- è‡ªå®šä¹‰æ’é™¤å…³é”®è¯

### 2. åˆ†ç±»å±•ç¤º

å°†æ¨¡å‹æŒ‰å‚å•†åˆ†ç±»å±•ç¤ºï¼š
- OpenAI æ¨¡å‹
- Anthropic æ¨¡å‹
- Google æ¨¡å‹
- å…¶ä»–æ¨¡å‹

### 3. æ ‡ç­¾ç­›é€‰

ä¸ºæ¨¡å‹æ·»åŠ æ ‡ç­¾ï¼Œæ”¯æŒæŒ‰æ ‡ç­¾ç­›é€‰ï¼š
- å¯¹è¯æ¨¡å‹
- ä»£ç æ¨¡å‹
- å¤šæ¨¡æ€æ¨¡å‹
- é•¿ä¸Šä¸‹æ–‡æ¨¡å‹

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [èšåˆå¹³å°æ¨¡å‹ç›®å½•æ™ºèƒ½ç®¡ç†](AGGREGATOR_MODEL_CATALOG.md)
- [æ¨¡å‹ç›®å½•å‚å®¶é€‰æ‹©ä¼˜åŒ–](MODEL_CATALOG_PROVIDER_SELECT.md)
- [èšåˆæ¸ é“æ”¯æŒæ–‡æ¡£](AGGREGATOR_SUPPORT.md)

## ğŸ‰ æ€»ç»“

é€šè¿‡æ™ºèƒ½è¿‡æ»¤åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ï¼š
- âœ… å¿«é€Ÿè·å–ä¸»æµå¤§å‚çš„å¸¸ç”¨æ¨¡å‹
- âœ… é¿å…è¢«å¤§é‡ä¸å¸¸ç”¨çš„æ¨¡å‹å¹²æ‰°
- âœ… æå‡æ¨¡å‹ç›®å½•ç®¡ç†æ•ˆç‡
- âœ… æ”¹å–„ç”¨æˆ·ä½“éªŒ

---

**åŠŸèƒ½å¼€å‘æ—¥æœŸ**ï¼š2025-10-12  
**å¼€å‘äººå‘˜**ï¼šAI Assistant  
**éœ€æ±‚æå‡ºäºº**ï¼šç”¨æˆ·

