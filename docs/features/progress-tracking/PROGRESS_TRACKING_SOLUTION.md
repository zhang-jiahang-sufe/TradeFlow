# ğŸ¯ è¿›åº¦è·Ÿè¸ªç³»ç»Ÿå®Œæ•´è§£å†³æ–¹æ¡ˆ

## ğŸ“‹ é—®é¢˜æ€»ç»“

### ç°è±¡
å‰ç«¯è¿›åº¦æ¡åœ¨åˆ†æè¿‡ç¨‹ä¸­ä¸èƒ½å®æ—¶æ›´æ–°ï¼Œç‰¹åˆ«æ˜¯åœ¨"ç ”ç©¶è¾©è®º"é˜¶æ®µä¼šå¡ä½ï¼Œç›´åˆ°åˆ†æå®Œæˆåç›´æ¥è·³åˆ°100%ã€‚

### ç”¨æˆ·åé¦ˆ
```
è¿›åº¦: 10% â†’ 60% â†’ [å¡ä½å¾ˆä¹…] â†’ 100%
æ­¥éª¤: å‡†å¤‡é˜¶æ®µ â†’ åŸºæœ¬é¢åˆ†æå¸ˆ â†’ [å¡ä½] â†’ å®Œæˆ
```

## ğŸ” æ ¹æœ¬åŸå› åˆ†æ

### 1. **èŠ‚ç‚¹åç§°ä¸åŒ¹é…** âŒ

**é—®é¢˜**ï¼šLangGraph å®é™…ä½¿ç”¨çš„èŠ‚ç‚¹åç§°ä¸æˆ‘ä»¬çš„æ˜ å°„è¡¨å®Œå…¨ä¸åŒ¹é…

| LangGraph å®é™…èŠ‚ç‚¹å | æˆ‘ä»¬çš„é”™è¯¯æ˜ å°„ | ç»“æœ |
|---------------------|---------------|------|
| `"Market Analyst"` | `'market_analyst'` | âŒ æ— æ³•åŒ¹é… |
| `"Fundamentals Analyst"` | `'fundamentals_analyst'` | âŒ æ— æ³•åŒ¹é… |
| `"Bull Researcher"` | `'bull_researcher'` | âŒ æ— æ³•åŒ¹é… |
| `"Bear Researcher"` | `'bear_researcher'` | âŒ æ— æ³•åŒ¹é… |
| `"Research Manager"` | `'research_manager'` | âŒ æ— æ³•åŒ¹é… |
| `"Trader"` | `'trader'` | âŒ æ— æ³•åŒ¹é… |
| `"Risk Judge"` | `'risk_manager'` | âŒ æ— æ³•åŒ¹é… |

**æ ¹æº**ï¼šåœ¨ `tradingagents/graph/setup.py` ä¸­ï¼ŒèŠ‚ç‚¹åç§°ä½¿ç”¨äº†é¦–å­—æ¯å¤§å†™çš„æ ¼å¼ï¼š
```python
workflow.add_node(f"{analyst_type.capitalize()} Analyst", node)  # "Market Analyst"
workflow.add_node("Bull Researcher", bull_researcher_node)
workflow.add_node("Bear Researcher", bear_researcher_node)
workflow.add_node("Research Manager", research_manager_node)
workflow.add_node("Trader", trader_node)
workflow.add_node("Risk Judge", risk_manager_node)
```

**å½±å“**ï¼šå›è°ƒå‡½æ•° `_send_progress_update()` æ— æ³•è¯†åˆ«ä»»ä½•èŠ‚ç‚¹ï¼Œå¯¼è‡´è¿›åº¦æ›´æ–°å®Œå…¨å¤±è´¥ã€‚

### 2. **è¿›åº¦è®¡ç®—ä¸å®Œæ•´** âŒ

**é—®é¢˜**ï¼šåªåœ¨"è¾©è®ºé˜¶æ®µ"ï¼ˆ60%-85%ï¼‰æ›´æ–°è¿›åº¦ï¼Œå…¶ä»–é˜¶æ®µæ²¡æœ‰æ›´æ–°

**ç¼ºå¤±çš„é˜¶æ®µ**ï¼š
- âŒ åˆ†æå¸ˆé˜¶æ®µï¼ˆ10%-45%ï¼‰ï¼šæ²¡æœ‰æ›´æ–°
- âŒ äº¤æ˜“å‘˜é˜¶æ®µï¼ˆ70%-78%ï¼‰ï¼šæ²¡æœ‰æ›´æ–°
- âŒ é£é™©è¯„ä¼°é˜¶æ®µï¼ˆ78%-93%ï¼‰ï¼šæ²¡æœ‰æ›´æ–°
- âŒ æœ€ç»ˆé˜¶æ®µï¼ˆ93%-100%ï¼‰ï¼šæ²¡æœ‰æ›´æ–°

**ä¹‹å‰çš„é”™è¯¯é€»è¾‘**ï¼š
```python
# åªå¤„ç†è¾©è®ºé˜¶æ®µ
if "çœ‹æ¶¨" in message:
    debate_node_count = 1
elif "çœ‹è·Œ" in message:
    debate_node_count = 2
# ...
current_progress = 60 + (25 * progress_in_debate)  # åªæ›´æ–° 60%-85%
```

### 3. **LangGraph stream_mode é…ç½®é”™è¯¯** âŒ

**é—®é¢˜**ï¼šä½¿ç”¨äº†é”™è¯¯çš„ `stream_mode`ï¼Œå¯¼è‡´æ— æ³•è·å–èŠ‚ç‚¹çº§åˆ«çš„æ›´æ–°

**å½“å‰é…ç½®**ï¼ˆ`tradingagents/graph/propagation.py`ï¼‰ï¼š
```python
def get_graph_args(self) -> Dict[str, Any]:
    return {
        "stream_mode": "values",  # âŒ é”™è¯¯ï¼šè¿”å›å®Œæ•´çŠ¶æ€
        "config": {"recursion_limit": self.max_recur_limit},
    }
```

**LangGraph stream_mode è¯´æ˜**ï¼š

| stream_mode | è¿”å›æ ¼å¼ | ç”¨é€” | æ˜¯å¦é€‚åˆè¿›åº¦è·Ÿè¸ª |
|-------------|---------|------|-----------------|
| `"values"` | `{"messages": [...], "company_of_interest": ..., ...}` | è·å–å®Œæ•´çŠ¶æ€ | âŒ æ— æ³•è¯†åˆ«èŠ‚ç‚¹ |
| `"updates"` | `{"Market Analyst": {...}}` | è·å–èŠ‚ç‚¹çº§åˆ«çš„æ›´æ–° | âœ… å¯ä»¥è¯†åˆ«èŠ‚ç‚¹ |

**å®é™…æ—¥å¿—è¯æ®**ï¼š
```
2025-10-03 09:29:27,798 | agents | INFO | ğŸ” [Progress] èŠ‚ç‚¹åç§°: messages
2025-10-03 09:32:08,496 | agents | INFO | ğŸ” [Progress] èŠ‚ç‚¹åç§°: messages
```

**ç»“è®º**ï¼šä½¿ç”¨ `stream_mode="values"` æ—¶ï¼Œchunk åªåŒ…å« `messages` é”®ï¼Œæ— æ³•æå–èŠ‚ç‚¹åç§°ã€‚

### 4. **æ­¥éª¤æƒé‡ä¸å®é™…æ‰§è¡Œä¸åŒæ­¥** âŒ

**é—®é¢˜**ï¼š`RedisProgressTracker` å®šä¹‰äº†18ä¸ªæ­¥éª¤ï¼Œä½† LangGraph åªæ‰§è¡Œå…¶ä¸­10ä¸ª

| æ­¥éª¤ç±»å‹ | æ­¥éª¤æ•° | LangGraph æ‰§è¡Œ | è¯´æ˜ |
|---------|-------|---------------|------|
| åŸºç¡€å‡†å¤‡é˜¶æ®µ | 5 | âŒ | è™šæ‹Ÿæ­¥éª¤ |
| åˆ†æå¸ˆå›¢é˜Ÿ | 2 | âœ… | å®é™…æ‰§è¡Œ |
| ç ”ç©¶è¾©è®º | 4 | âœ… (3ä¸ª) | "ç ”ç©¶è¾©è®º ç¬¬1è½®"æ˜¯è™šæ‹Ÿçš„ |
| äº¤æ˜“å‘˜ | 1 | âœ… | å®é™…æ‰§è¡Œ |
| é£é™©è¯„ä¼° | 4 | âœ… | å®é™…æ‰§è¡Œ |
| æœ€ç»ˆå†³ç­– | 2 | âŒ | è™šæ‹Ÿæ­¥éª¤ |
| **æ€»è®¡** | **18** | **10** | **è¦†ç›–ç‡ 55.6%** |

## âœ… å®Œæ•´è§£å†³æ–¹æ¡ˆ

### ä¿®æ”¹æ–‡ä»¶æ¸…å•
1. **`tradingagents/graph/propagation.py`** - ä¿®å¤ stream_mode é…ç½®ï¼ˆæœ€å…³é”®ï¼‰
2. **`tradingagents/graph/trading_graph.py`** - ä¿®å¤èŠ‚ç‚¹åç§°æ˜ å°„å’ŒçŠ¶æ€ç´¯ç§¯é€»è¾‘
3. **`app/services/simple_analysis_service.py`** - ä¿®å¤è¿›åº¦è®¡ç®—é€»è¾‘

### 0. ä¿®å¤ stream_mode é…ç½®ï¼ˆæœ€å…³é”®çš„ä¿®å¤ï¼‰

**æ–‡ä»¶**ï¼š`tradingagents/graph/propagation.py`

**é—®é¢˜**ï¼šä½¿ç”¨ `stream_mode="values"` å¯¼è‡´æ— æ³•è·å–èŠ‚ç‚¹çº§åˆ«çš„æ›´æ–°

**ä¿®æ”¹å†…å®¹**ï¼š
```python
def get_graph_args(self, use_progress_callback: bool = False) -> Dict[str, Any]:
    """Get arguments for the graph invocation.

    Args:
        use_progress_callback: If True, use 'updates' mode for node-level progress tracking.
                              If False, use 'values' mode for complete state updates.
    """
    # âœ… ä½¿ç”¨ 'updates' æ¨¡å¼å¯ä»¥è·å–èŠ‚ç‚¹çº§åˆ«çš„æ›´æ–°ï¼Œç”¨äºè¿›åº¦è·Ÿè¸ª
    # ä½¿ç”¨ 'values' æ¨¡å¼å¯ä»¥è·å–å®Œæ•´çš„çŠ¶æ€æ›´æ–°
    stream_mode = "updates" if use_progress_callback else "values"

    return {
        "stream_mode": stream_mode,
        "config": {"recursion_limit": self.max_recur_limit},
    }
```

**å…³é”®æ”¹è¿›**ï¼š
- âœ… å½“æœ‰è¿›åº¦å›è°ƒæ—¶ï¼Œä½¿ç”¨ `stream_mode="updates"` è·å–èŠ‚ç‚¹çº§åˆ«çš„æ›´æ–°
- âœ… å½“æ²¡æœ‰è¿›åº¦å›è°ƒæ—¶ï¼Œä½¿ç”¨ `stream_mode="values"` è·å–å®Œæ•´çŠ¶æ€ï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰
- âœ… chunk æ ¼å¼ä» `{"messages": [...]}` å˜ä¸º `{"Market Analyst": {...}}`

### 1. ä¿®å¤èŠ‚ç‚¹åç§°æ˜ å°„

**æ–‡ä»¶**ï¼š`tradingagents/graph/trading_graph.py`

**ä¿®æ”¹å†…å®¹**ï¼š
```python
def _send_progress_update(self, chunk, progress_callback):
    """å‘é€è¿›åº¦æ›´æ–°åˆ°å›è°ƒå‡½æ•°"""
    try:
        if not isinstance(chunk, dict):
            return
        
        # è·å–èŠ‚ç‚¹åç§°
        node_name = None
        for key in chunk.keys():
            if not key.startswith('__'):
                node_name = key
                break
        
        if not node_name:
            return
        
        # âœ… æ­£ç¡®çš„èŠ‚ç‚¹åç§°æ˜ å°„è¡¨ï¼ˆåŒ¹é… LangGraph å®é™…èŠ‚ç‚¹åï¼‰
        node_mapping = {
            # åˆ†æå¸ˆèŠ‚ç‚¹
            'Market Analyst': "ğŸ“Š å¸‚åœºåˆ†æå¸ˆ",
            'Fundamentals Analyst': "ğŸ’¼ åŸºæœ¬é¢åˆ†æå¸ˆ",
            'News Analyst': "ğŸ“° æ–°é—»åˆ†æå¸ˆ",
            'Social Analyst': "ğŸ’¬ ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ",
            # å·¥å…·èŠ‚ç‚¹ï¼ˆè·³è¿‡ï¼‰
            'tools_market': None,
            'tools_fundamentals': None,
            'tools_news': None,
            'tools_social': None,
            # æ¶ˆæ¯æ¸…ç†èŠ‚ç‚¹ï¼ˆè·³è¿‡ï¼‰
            'Msg Clear Market': None,
            'Msg Clear Fundamentals': None,
            'Msg Clear News': None,
            'Msg Clear Social': None,
            # ç ”ç©¶å‘˜èŠ‚ç‚¹
            'Bull Researcher': "ğŸ‚ çœ‹æ¶¨ç ”ç©¶å‘˜",
            'Bear Researcher': "ğŸ» çœ‹è·Œç ”ç©¶å‘˜",
            'Research Manager': "ğŸ‘” ç ”ç©¶ç»ç†",
            # äº¤æ˜“å‘˜èŠ‚ç‚¹
            'Trader': "ğŸ’¼ äº¤æ˜“å‘˜å†³ç­–",
            # é£é™©è¯„ä¼°èŠ‚ç‚¹
            'Risky Analyst': "ğŸ”¥ æ¿€è¿›é£é™©è¯„ä¼°",
            'Safe Analyst': "ğŸ›¡ï¸ ä¿å®ˆé£é™©è¯„ä¼°",
            'Neutral Analyst': "âš–ï¸ ä¸­æ€§é£é™©è¯„ä¼°",
            'Risk Judge': "ğŸ¯ é£é™©ç»ç†",
        }
        
        message = node_mapping.get(node_name)
        
        if message is None:
            # è·³è¿‡å·¥å…·èŠ‚ç‚¹å’Œæ¶ˆæ¯æ¸…ç†èŠ‚ç‚¹
            return
        
        if message:
            progress_callback(message)
            
    except Exception as e:
        logger.error(f"âŒ è¿›åº¦æ›´æ–°å¤±è´¥: {e}", exc_info=True)
```

### 2. ä¿®å¤è¿›åº¦è®¡ç®—é€»è¾‘

**æ–‡ä»¶**ï¼š`app/services/simple_analysis_service.py`

**ä¿®æ”¹å†…å®¹**ï¼š
```python
# âœ… å®Œæ•´çš„èŠ‚ç‚¹è¿›åº¦æ˜ å°„è¡¨
node_progress_map = {
    # åˆ†æå¸ˆé˜¶æ®µ (10% â†’ 45%)
    "ğŸ“Š å¸‚åœºåˆ†æå¸ˆ": 27.5,      # 10% + 17.5%
    "ğŸ’¼ åŸºæœ¬é¢åˆ†æå¸ˆ": 45,       # 10% + 35%
    "ğŸ“° æ–°é—»åˆ†æå¸ˆ": 27.5,
    "ğŸ’¬ ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ": 27.5,
    # ç ”ç©¶è¾©è®ºé˜¶æ®µ (45% â†’ 70%)
    "ğŸ‚ çœ‹æ¶¨ç ”ç©¶å‘˜": 51.25,      # 45% + 6.25%
    "ğŸ» çœ‹è·Œç ”ç©¶å‘˜": 57.5,       # 45% + 12.5%
    "ğŸ‘” ç ”ç©¶ç»ç†": 70,           # 45% + 25%
    # äº¤æ˜“å‘˜é˜¶æ®µ (70% â†’ 78%)
    "ğŸ’¼ äº¤æ˜“å‘˜å†³ç­–": 78,         # 70% + 8%
    # é£é™©è¯„ä¼°é˜¶æ®µ (78% â†’ 93%)
    "ğŸ”¥ æ¿€è¿›é£é™©è¯„ä¼°": 81.75,    # 78% + 3.75%
    "ğŸ›¡ï¸ ä¿å®ˆé£é™©è¯„ä¼°": 85.5,    # 78% + 7.5%
    "âš–ï¸ ä¸­æ€§é£é™©è¯„ä¼°": 89.25,   # 78% + 11.25%
    "ğŸ¯ é£é™©ç»ç†": 93,           # 78% + 15%
    # æœ€ç»ˆé˜¶æ®µ (93% â†’ 100%)
    "ğŸ“Š ç”ŸæˆæŠ¥å‘Š": 97,           # 93% + 4%
}

def graph_progress_callback(message: str):
    """æ¥æ”¶ LangGraph çš„è¿›åº¦æ›´æ–°"""
    try:
        if not progress_tracker:
            return
        
        # âœ… ç›´æ¥æ˜ å°„èŠ‚ç‚¹åˆ°è¿›åº¦ç™¾åˆ†æ¯”
        progress_pct = node_progress_map.get(message)
        
        if progress_pct is not None:
            progress_tracker.update_progress({
                'progress_percentage': int(progress_pct),
                'last_message': message
            })
            logger.info(f"ğŸ“Š è¿›åº¦å·²æ›´æ–°: {int(progress_pct)}% - {message}")
        else:
            # æœªçŸ¥èŠ‚ç‚¹ï¼Œåªæ›´æ–°æ¶ˆæ¯
            progress_tracker.update_progress({
                'last_message': message
            })
            
    except Exception as e:
        logger.error(f"âŒ å›è°ƒå¤±è´¥: {e}", exc_info=True)
```

## ğŸ§ª æµ‹è¯•éªŒè¯

### è¿è¡Œæµ‹è¯•è„šæœ¬
```powershell
.\.venv\Scripts\python scripts/test_progress_tracking.py
```

### æµ‹è¯•ç»“æœ
```
âœ… æ‰€æœ‰èŠ‚ç‚¹éƒ½å·²æ­£ç¡®æ˜ å°„ï¼
âœ… è¿›åº¦å•è°ƒé€’å¢ï¼
âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
```

### æµ‹è¯•è¦†ç›–
- âœ… 20ä¸ª LangGraph èŠ‚ç‚¹å…¨éƒ¨æ­£ç¡®æ˜ å°„
- âœ… è¿›åº¦è®¡ç®—å•è°ƒé€’å¢ï¼ˆæ— å›é€€ï¼‰
- âœ… è¦†ç›–æ‰€æœ‰åˆ†æé˜¶æ®µï¼ˆåˆ†æå¸ˆã€ç ”ç©¶å‘˜ã€äº¤æ˜“å‘˜ã€é£é™©è¯„ä¼°ï¼‰

## ğŸ¯ ä¿®å¤æ•ˆæœå¯¹æ¯”

### ä¿®å¤å‰ âŒ
```
è¿›åº¦: 10% â†’ 60% â†’ [å¡ä½å¾ˆä¹…] â†’ 100%
æ­¥éª¤: å‡†å¤‡é˜¶æ®µ â†’ åŸºæœ¬é¢åˆ†æå¸ˆ â†’ [å¡ä½] â†’ å®Œæˆ
æ—¥å¿—: âš ï¸ æœªçŸ¥èŠ‚ç‚¹: Market Analyst
```

### ä¿®å¤å âœ…
```
è¿›åº¦: 10% â†’ 27.5% â†’ 45% â†’ 51.25% â†’ 57.5% â†’ 70% â†’ 78% â†’ 81.75% â†’ 85.5% â†’ 89.25% â†’ 93% â†’ 97% â†’ 100%
æ­¥éª¤: å‡†å¤‡ â†’ å¸‚åœºåˆ†æå¸ˆ â†’ åŸºæœ¬é¢åˆ†æå¸ˆ â†’ çœ‹æ¶¨ç ”ç©¶å‘˜ â†’ çœ‹è·Œç ”ç©¶å‘˜ â†’ ç ”ç©¶ç»ç† â†’ äº¤æ˜“å‘˜ â†’ æ¿€è¿›é£é™© â†’ ä¿å®ˆé£é™© â†’ ä¸­æ€§é£é™© â†’ é£é™©ç»ç† â†’ ç”ŸæˆæŠ¥å‘Š â†’ å®Œæˆ
æ—¥å¿—: âœ… èŠ‚ç‚¹åç§°: Market Analyst â†’ ğŸ“Š å¸‚åœºåˆ†æå¸ˆ
```

## ğŸ“Š è¿›åº¦æµç¨‹å›¾

```
å¼€å§‹ (0%)
  â†“
å‡†å¤‡é˜¶æ®µ (10%)  [è™šæ‹Ÿæ­¥éª¤ï¼Œè‡ªåŠ¨å®Œæˆ]
  â†“
ğŸ“Š å¸‚åœºåˆ†æå¸ˆ (27.5%)  â† LangGraph å›è°ƒ
  â†“
ğŸ’¼ åŸºæœ¬é¢åˆ†æå¸ˆ (45%)  â† LangGraph å›è°ƒ
  â†“
ğŸ‚ çœ‹æ¶¨ç ”ç©¶å‘˜ (51.25%)  â† LangGraph å›è°ƒ
  â†“
ğŸ» çœ‹è·Œç ”ç©¶å‘˜ (57.5%)  â† LangGraph å›è°ƒ
  â†“
ğŸ‘” ç ”ç©¶ç»ç† (70%)  â† LangGraph å›è°ƒ
  â†“
ğŸ’¼ äº¤æ˜“å‘˜å†³ç­– (78%)  â† LangGraph å›è°ƒ
  â†“
ğŸ”¥ æ¿€è¿›é£é™©è¯„ä¼° (81.75%)  â† LangGraph å›è°ƒ
  â†“
ğŸ›¡ï¸ ä¿å®ˆé£é™©è¯„ä¼° (85.5%)  â† LangGraph å›è°ƒ
  â†“
âš–ï¸ ä¸­æ€§é£é™©è¯„ä¼° (89.25%)  â† LangGraph å›è°ƒ
  â†“
ğŸ¯ é£é™©ç»ç† (93%)  â† LangGraph å›è°ƒ
  â†“
ğŸ“Š ç”ŸæˆæŠ¥å‘Š (97%)  [è™šæ‹Ÿæ­¥éª¤]
  â†“
å®Œæˆ (100%)
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

1. **é‡å¯åç«¯**
   ```powershell
   .\.venv\Scripts\python -m app
   ```

2. **åˆ·æ–°å‰ç«¯**
   - æŒ‰ F5 åˆ·æ–°æµè§ˆå™¨é¡µé¢

3. **è§¦å‘æ–°çš„åˆ†æä»»åŠ¡**
   - è¾“å…¥è‚¡ç¥¨ä»£ç ï¼ˆå¦‚ï¼š601398ï¼‰
   - ç‚¹å‡»"å¼€å§‹åˆ†æ"æŒ‰é’®

4. **è§‚å¯Ÿè¿›åº¦æ›´æ–°**
   - âœ… è¿›åº¦æ¡åº”è¯¥å¹³æ»‘æ›´æ–°
   - âœ… æ­¥éª¤çŠ¶æ€æ­£ç¡®æ˜¾ç¤ºï¼ˆcompleted/current/pendingï¼‰
   - âœ… å½“å‰æ­¥éª¤åç§°å®æ—¶æ›´æ–°

5. **æ£€æŸ¥æ—¥å¿—**
   ```powershell
   Get-Content "logs\webapi.log" -Tail 1000 | Select-String "ğŸ¯ğŸ¯ğŸ¯|ğŸ“Š \[Graphè¿›åº¦\]"
   ```

## ğŸ“ å…³é”®æ”¹è¿›ç‚¹

1. âœ… **èŠ‚ç‚¹åç§°å®Œå…¨åŒ¹é…**ï¼šä½¿ç”¨ LangGraph å®é™…çš„èŠ‚ç‚¹åç§°ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰
2. âœ… **è¦†ç›–æ‰€æœ‰é˜¶æ®µ**ï¼šåˆ†æå¸ˆã€ç ”ç©¶å‘˜ã€äº¤æ˜“å‘˜ã€é£é™©è¯„ä¼°ã€æœ€ç»ˆé˜¶æ®µ
3. âœ… **è·³è¿‡ä¸­é—´èŠ‚ç‚¹**ï¼šå·¥å…·èŠ‚ç‚¹å’Œæ¶ˆæ¯æ¸…ç†èŠ‚ç‚¹ä¸è§¦å‘è¿›åº¦æ›´æ–°
4. âœ… **è¿›åº¦ç™¾åˆ†æ¯”å‡†ç¡®**ï¼šä¸ RedisProgressTracker çš„æ­¥éª¤æƒé‡å¯¹åº”
5. âœ… **é”™è¯¯å¤„ç†å®Œå–„**ï¼šæœªçŸ¥èŠ‚ç‚¹ä¹Ÿèƒ½æ­£å¸¸å¤„ç†
6. âœ… **æµ‹è¯•è„šæœ¬éªŒè¯**ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•ç¡®ä¿é…ç½®æ­£ç¡®

## ğŸ”§ åç»­ä¼˜åŒ–å»ºè®®

1. **åŠ¨æ€è¿›åº¦è®¡ç®—**ï¼šæ ¹æ®å®é™…é€‰æ‹©çš„åˆ†æå¸ˆæ•°é‡åŠ¨æ€è°ƒæ•´è¿›åº¦ç™¾åˆ†æ¯”
2. **è¾©è®ºè½®æ¬¡æ”¯æŒ**ï¼šæ ¹æ® research_depth åŠ¨æ€è®¡ç®—è¾©è®ºé˜¶æ®µçš„è¿›åº¦
3. **å¹¶è¡Œåˆ†æå¸ˆ**ï¼šå¦‚æœåˆ†æå¸ˆå¹¶è¡Œæ‰§è¡Œï¼Œéœ€è¦è°ƒæ•´è¿›åº¦è®¡ç®—é€»è¾‘
4. **è¿›åº¦å¹³æ»‘è¿‡æ¸¡**ï¼šæ·»åŠ è¿›åº¦åŠ¨ç”»ï¼Œé¿å…è·³è·ƒå¼æ›´æ–°
5. **æ­¥éª¤æ—¶é—´ä¼°ç®—**ï¼šæ ¹æ®å†å²æ•°æ®ä¼˜åŒ–å‰©ä½™æ—¶é—´ä¼°ç®—

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `docs/progress-tracking-fix.md` - è¯¦ç»†çš„é—®é¢˜åˆ†æå’Œä¿®å¤æ–¹æ¡ˆ
- `scripts/test_progress_tracking.py` - è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
- `tradingagents/graph/setup.py` - LangGraph èŠ‚ç‚¹å®šä¹‰
- `app/services/progress/tracker.py` - è¿›åº¦è·Ÿè¸ªå™¨å®ç°

